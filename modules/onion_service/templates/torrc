# The following three options make the onion service "non-anonymous" which
# means that the location of the onion service is not hidden. This means the
# circuit length is 3, not 6 as for regular onion services. This should reduce
# latency.
#
# Unfortunately the SocksPort must be disabled, so this tor daemon cann't be
# used as a regular tor client to proxy outbound traffic. If you want this, you
# can:
#     1. remove these lines, or
#     2. use tor-instance-create to run another tor daemon with systemd
#
# - pastly 2021-02-18
SocksPort 0
HiddenServiceSingleHopMode 1
HiddenServiceNonAnonymousMode 1

HiddenServiceDir /var/lib/tor/ircd_service
HiddenServiceVersion 3
# The first argument is the virtual port that people will connect to. It's not
# real on the system. It only exists as a concept inside the tor process.
#
# The second argument is where to forward traffic. We will want this to be the
# public IP of the host running the ircd (so traffic doesn't come from
# localhost, which can be accidentally dangerous for ircds), and we want the
# port to be a special port that is not accessible from the outside and the
# ircd knows is only used by tor users.
HiddenServicePort 6667 127.0.0.1:6655
